# AmoNotes — Примечания / события

[Официальная документация AmoCRM, описание полей](https://www.amocrm.ru/developers/content/api/notes)

## Пример использования

```r
library(amocrm)
# получение примечаний по контактам по дефолту
notes <- AmoNotes(auth_list = auth_list)

# получение примечаний по определенной сделке
notes <- AmoNotes(auth_list = auth_list, type = 'lead', id = 666)

# получение всех примечаний
notes <- AmoNotes(auth_list = auth_list, all = TRUE)

# примечания по сделкам
lead_notes <- notes$lead_notes

# получение изменений этапов сделок с 1 июня 2019
notes <- AmoNotes(auth_list = auth_list, type = 'lead', note_type = 3, if_modified_since = '2019-06-01 00:00:00')
```
## Параметры ответа

Если указан `all = TRUE`, то отдает лист с датафреймами для каждой сущности (`contact_notes`, `lead_notes`, `company_notes`, `task_notes`)

## Параметры запроса

Параметр | Описание
 --- | ---
email | **Обязательный**. Ваш e-mail. **Можно не указывать, если указан** `auth_list`.
apikey | **Обязательный**. Ваш API-ключ. **Можно не указывать, если указан** `auth_list`.
domain | **Обязательный**. Ваш поддомен. **Можно не указывать, если указан** `auth_list`.
auth_list | **Обязательный**. Лист с авторизационными данными, подробнее `?AmoAuthList`. **Можно не указывать, если указаны три параметра выше**.
limit | Батчинг запросов. По дефолту 500. Иногда AmoCRM API лагает и не отдает данные, в таких случаях можно попробовать уменьшить этот параметр.
id | Фильтр. Выбрать элемент с заданным ID (если указан этот параметр, все остальные игнорируются). Вектор передавать **нельзя** ¯\_( ツ)_/¯.
type | По какому типу сущности получить примечания. `"contact"`, `"lead"`, `"company"` или `"task"`. По дефолту `contact`.
element_id | Фильтр. ID сущности, по которой будут получены примечания.
note_type | Фильтр. Тип события. В доках Амо перечислены не все, путем проб и ошибок составил [**вот эту табличку**](#note_type). 
if_modified_since | Фильтр. События, изменённые от определённого времени. Формат даты '2019-02-02 14:30:00'.
all | Если `TRUE`, то отдаст лист с датафреймами примечаний для всех сущностей. По дефолту `FALSE`.

<a name="note_type"></a>
## Типы событий note_type (для фильтра)
Значение | Тип
 --- | ---
1 | Добавлен новый объект
3 | Изменение этапа сделки
4 | Обычное примечание
5 | Прикрепление файла
10 | Добавление звонка
13 | Результат по задаче
15 | Внесение параметров при создании объекта (?)
22 | Создание покупателя (?)
24 | Входящее письмо (?)
25 | Системное сообщение
26 | Добавление тега
102 | Входящее смс
103 | Исходящее смс

